<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jolly King - Neighborhood Store Liquor & Food</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=Space+Mono:wght@700&display=swap" rel="stylesheet">
    <style>
        :root{--coral:#E85A4F;--coral-dark:#D64940;--cream:#FDF8F5;--charcoal:#1A1A1A;--warm-gray:#6B6560;--light-gray:#E8E4E1;--white:#FFFFFF;--green:#2E7D32;--gold:#D4AF37;--shadow-sm:0 2px 8px rgba(26,26,26,0.06);--shadow-md:0 4px 20px rgba(26,26,26,0.1);--shadow-lg:0 8px 40px rgba(26,26,26,0.15);--radius-sm:12px;--radius-md:16px;--radius-lg:24px;--radius-full:9999px}
        *{margin:0;padding:0;box-sizing:border-box}body{font-family:'Outfit',-apple-system,sans-serif;background:var(--cream);color:var(--charcoal);min-height:100vh;-webkit-font-smoothing:antialiased}
        .header{position:fixed;top:0;left:0;right:0;z-index:100;background:var(--white);border-bottom:1px solid var(--light-gray);padding:12px 16px;backdrop-filter:blur(20px)}.header-content{max-width:1200px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;gap:16px}
        .logo{display:flex;align-items:center;gap:10px;text-decoration:none;flex-shrink:0;cursor:pointer}.logo-mark{font-family:'Space Mono',monospace;font-size:24px;font-weight:700;background:linear-gradient(135deg,var(--coral) 0%,var(--coral-dark) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
        .logo-text{display:none;font-weight:700;font-size:14px;color:var(--charcoal);line-height:1.1}.logo-text span{display:block;font-weight:400;font-size:11px;color:var(--warm-gray)}@media(min-width:480px){.logo-text{display:block}}
        .search-container{flex:1;max-width:400px}.search-box{position:relative;width:100%}.search-input{width:100%;padding:12px 16px 12px 44px;border:2px solid var(--light-gray);border-radius:var(--radius-full);font-family:inherit;font-size:15px;background:var(--cream);color:var(--charcoal);transition:all 0.2s ease}
        .search-input:focus{outline:none;border-color:var(--coral);background:var(--white);box-shadow:0 0 0 4px rgba(232,90,79,0.1)}.search-input::placeholder{color:var(--warm-gray)}.search-icon{position:absolute;left:16px;top:50%;transform:translateY(-50%);width:18px;height:18px;color:var(--warm-gray)}
        .suggest-btn-header{display:flex;align-items:center;gap:6px;padding:10px 16px;background:var(--coral);color:var(--white);border:none;border-radius:var(--radius-full);font-family:inherit;font-size:14px;font-weight:500;cursor:pointer;transition:all 0.2s ease;white-space:nowrap}
        .suggest-btn-header:hover{background:var(--coral-dark);transform:translateY(-1px)}.suggest-btn-header svg{width:16px;height:16px}.suggest-btn-header .btn-text{display:none}@media(min-width:640px){.suggest-btn-header .btn-text{display:inline}}
        .main{padding-top:80px;min-height:100vh}.hero{padding:24px 16px 8px;text-align:center}.hero h1{font-size:28px;font-weight:800;margin-bottom:8px;background:linear-gradient(135deg,var(--charcoal) 0%,var(--warm-gray) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.hero p{font-size:15px;color:var(--warm-gray)}
        .services-banner{padding:16px;max-width:1200px;margin:0 auto}.services-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}@media(min-width:640px){.services-grid{grid-template-columns:repeat(4,1fr)}}
        .service-card{background:var(--white);border-radius:var(--radius-md);padding:16px;text-align:center;text-decoration:none;color:var(--charcoal);transition:all 0.2s ease;border:2px solid transparent}.service-card:hover{border-color:var(--coral);transform:translateY(-2px);box-shadow:var(--shadow-md)}
        .service-card .service-icon{width:40px;height:40px;margin:0 auto 8px;background:var(--cream);border-radius:10px;display:flex;align-items:center;justify-content:center}.service-card .service-icon svg{width:24px;height:24px;color:var(--coral)}.service-card h3{font-size:14px;font-weight:600;margin-bottom:2px}.service-card p{font-size:12px;color:var(--warm-gray)}
        .ebt-banner{background:linear-gradient(135deg,var(--green),#1B5E20);color:white;text-align:center;padding:10px 16px;margin:16px 16px 0;border-radius:var(--radius-sm);max-width:1168px;margin-left:auto;margin-right:auto;display:flex;align-items:center;justify-content:center;gap:8px;font-weight:500;font-size:14px}.ebt-banner svg{width:18px;height:18px}
        .departments{padding:16px 16px 12px;position:sticky;top:65px;z-index:50;background:var(--cream)}.dept-scroll{display:flex;gap:8px;overflow-x:auto;scrollbar-width:none;padding:4px 0}.dept-scroll::-webkit-scrollbar{display:none}
        .dept-btn{flex-shrink:0;padding:10px 18px;border:none;border-radius:var(--radius-full);font-family:inherit;font-size:14px;font-weight:500;cursor:pointer;transition:all 0.2s ease;background:var(--white);color:var(--warm-gray);border:2px solid transparent;white-space:nowrap}
        .dept-btn:hover{color:var(--charcoal);border-color:var(--light-gray)}.dept-btn.active{background:var(--coral);color:var(--white);box-shadow:var(--shadow-sm)}.dept-btn .count{display:inline-block;margin-left:6px;padding:2px 8px;background:rgba(0,0,0,0.1);border-radius:var(--radius-full);font-size:12px}.dept-btn.active .count{background:rgba(255,255,255,0.25)}
        .products-section{padding:0 16px 100px;max-width:1200px;margin:0 auto}.products-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}.products-count{font-size:14px;color:var(--warm-gray)}.products-count strong{color:var(--charcoal);font-weight:600}
        .view-toggle{display:flex;gap:4px;background:var(--white);padding:4px;border-radius:var(--radius-sm)}.view-btn{padding:8px;border:none;background:transparent;border-radius:8px;cursor:pointer;color:var(--warm-gray);transition:all 0.2s ease}.view-btn:hover{color:var(--charcoal)}.view-btn.active{background:var(--coral);color:var(--white)}.view-btn svg{width:18px;height:18px;display:block}
        .products-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}.products-grid.list-view{grid-template-columns:1fr;gap:8px}@media(min-width:480px){.products-grid{grid-template-columns:repeat(3,1fr)}}@media(min-width:768px){.products-grid{grid-template-columns:repeat(4,1fr);gap:16px}}@media(min-width:1024px){.products-grid{grid-template-columns:repeat(5,1fr)}}
        .product-card{background:var(--white);border-radius:var(--radius-md);overflow:hidden;transition:all 0.25s ease;cursor:pointer;position:relative;animation:fadeInUp 0.4s ease backwards}.product-card:hover{transform:translateY(-4px);box-shadow:var(--shadow-lg)}
        .product-image{aspect-ratio:1;background:linear-gradient(145deg,#f8f6f4 0%,#eae6e3 100%);display:flex;align-items:center;justify-content:center;padding:16px;position:relative;overflow:hidden}.product-image img{max-width:80%;max-height:80%;object-fit:contain;transition:transform 0.3s ease}.product-card:hover .product-image img{transform:scale(1.08)}.product-image .placeholder-icon{width:48px;height:48px;color:var(--light-gray)}
        .product-info{padding:12px}.product-dept{font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:0.5px;color:var(--coral);margin-bottom:4px}.product-name{font-size:14px;font-weight:500;color:var(--charcoal);line-height:1.3;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.product-size{font-size:13px;color:var(--warm-gray);margin-top:4px}
        .products-grid.list-view .product-card{display:flex;flex-direction:row}.products-grid.list-view .product-image{width:100px;min-width:100px}.products-grid.list-view .product-info{display:flex;flex-direction:column;justify-content:center;flex:1}.products-grid.list-view .product-name{-webkit-line-clamp:1}
        .lotto-section{padding:24px 16px;max-width:1200px;margin:0 auto}.lotto-section.hidden{display:none}.section-title{font-size:22px;font-weight:700;margin-bottom:16px;display:flex;align-items:center;gap:10px}.section-title svg{width:28px;height:28px;color:var(--gold)}
        .lotto-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-bottom:24px}@media(min-width:640px){.lotto-grid{grid-template-columns:repeat(3,1fr)}}@media(min-width:768px){.lotto-grid{grid-template-columns:repeat(4,1fr)}}
        .lotto-card{background:linear-gradient(145deg,#1a1a2e 0%,#16213e 100%);border-radius:var(--radius-md);padding:16px;color:white;text-align:center;transition:all 0.2s ease}.lotto-card:hover{transform:translateY(-2px);box-shadow:var(--shadow-lg)}.lotto-card h4{font-size:14px;font-weight:700;margin-bottom:4px;color:var(--gold)}.lotto-card .price{font-size:20px;font-weight:800}.lotto-card .price span{font-size:12px;font-weight:400;opacity:0.7}
        .scratchers-title{font-size:18px;font-weight:600;margin-bottom:12px;color:var(--charcoal)}.scratchers-grid{display:flex;flex-wrap:wrap;gap:10px}.scratcher-chip{background:linear-gradient(135deg,var(--gold) 0%,#B8962E 100%);color:var(--charcoal);padding:12px 20px;border-radius:var(--radius-full);font-weight:700;font-size:15px;transition:all 0.2s ease}.scratcher-chip:hover{transform:scale(1.05);box-shadow:var(--shadow-md)}
        .empty-state{text-align:center;padding:60px 20px;color:var(--warm-gray)}.empty-state svg{width:64px;height:64px;margin-bottom:16px;opacity:0.4}.empty-state h3{font-size:18px;font-weight:600;color:var(--charcoal);margin-bottom:8px}
        .loading-state{text-align:center;padding:60px 20px}.loading-spinner{width:48px;height:48px;border:4px solid var(--light-gray);border-top-color:var(--coral);border-radius:50%;animation:spin 1s linear infinite;margin:0 auto 16px}@keyframes spin{to{transform:rotate(360deg)}}.loading-state p{color:var(--warm-gray)}
        .modal-overlay{position:fixed;inset:0;background:rgba(26,26,26,0.5);backdrop-filter:blur(4px);z-index:200;display:flex;align-items:flex-end;justify-content:center;opacity:0;visibility:hidden;transition:all 0.3s ease}.modal-overlay.open{opacity:1;visibility:visible}@media(min-width:640px){.modal-overlay{align-items:center;padding:24px}}
        .modal{background:var(--white);width:100%;max-width:500px;max-height:90vh;overflow-y:auto;border-radius:var(--radius-lg) var(--radius-lg) 0 0;transform:translateY(100%);transition:transform 0.3s ease}.modal-overlay.open .modal{transform:translateY(0)}@media(min-width:640px){.modal{border-radius:var(--radius-lg);transform:translateY(20px) scale(0.95)}.modal-overlay.open .modal{transform:translateY(0) scale(1)}}
        .modal-header{padding:20px 24px;border-bottom:1px solid var(--light-gray);display:flex;align-items:center;justify-content:space-between}.modal-header h2{font-size:20px;font-weight:700}
        .modal-close{width:36px;height:36px;border:none;background:var(--cream);border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;color:var(--warm-gray);transition:all 0.2s ease}.modal-close:hover{background:var(--light-gray);color:var(--charcoal)}.modal-close svg{width:20px;height:20px}
        .modal-body{padding:24px}.form-group{margin-bottom:20px}.form-group label{display:block;font-size:14px;font-weight:600;margin-bottom:8px;color:var(--charcoal)}
        .form-group input,.form-group textarea,.form-group select{width:100%;padding:14px 16px;border:2px solid var(--light-gray);border-radius:var(--radius-sm);font-family:inherit;font-size:15px;color:var(--charcoal);background:var(--white);transition:all 0.2s ease}
        .form-group input:focus,.form-group textarea:focus,.form-group select:focus{outline:none;border-color:var(--coral);box-shadow:0 0 0 4px rgba(232,90,79,0.1)}.form-group textarea{resize:vertical;min-height:100px}.form-group .helper-text{font-size:13px;color:var(--warm-gray);margin-top:6px}
        .submit-btn{width:100%;padding:16px 24px;background:var(--coral);color:var(--white);border:none;border-radius:var(--radius-sm);font-family:inherit;font-size:16px;font-weight:600;cursor:pointer;transition:all 0.2s ease}.submit-btn:hover{background:var(--coral-dark)}
        .success-message{text-align:center;padding:40px 20px}.success-message svg{width:64px;height:64px;color:var(--green);margin-bottom:16px}.success-message h3{font-size:20px;font-weight:700;margin-bottom:8px}.success-message p{color:var(--warm-gray);margin-bottom:24px}
        .footer{background:var(--charcoal);color:var(--white);padding:32px 16px;text-align:center}.footer-logo{font-family:'Space Mono',monospace;font-size:32px;font-weight:700;color:var(--coral);margin-bottom:16px}.footer-address{font-size:14px;color:rgba(255,255,255,0.7);margin-bottom:8px}.footer-hours{font-size:13px;color:rgba(255,255,255,0.5)}
        .scroll-top{position:fixed;bottom:24px;right:24px;width:48px;height:48px;background:var(--coral);color:var(--white);border:none;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;box-shadow:var(--shadow-lg);opacity:0;visibility:hidden;transform:translateY(20px);transition:all 0.3s ease;z-index:90}
        .scroll-top.visible{opacity:1;visibility:visible;transform:translateY(0)}.scroll-top:hover{background:var(--coral-dark)}.scroll-top svg{width:24px;height:24px}
        @keyframes fadeInUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.hidden{display:none !important}
    </style>
</head>
<body>
    <header class="header"><div class="header-content">
        <a class="logo" onclick="location.reload()"><span class="logo-mark">JK</span><div class="logo-text">Jolly King<span>Liquor & Food</span></div></a>
        <div class="search-container"><div class="search-box"><svg class="search-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg><input type="text" class="search-input" placeholder="Search products..." id="searchInput"></div></div>
        <button class="suggest-btn-header" id="openSuggestModal"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/></svg><span class="btn-text">Suggest Item</span></button>
    </div></header>

    <main class="main">
        <section class="hero"><h1>Welcome to Jolly King</h1><p>Your neighborhood store for liquor, beer, wine & groceries</p></section>
        <section class="services-banner"><div class="services-grid">
            <a href="https://www.doordash.com/convenience/store/jolly-king-liquor-&-food-fairfield-689439/" target="_blank" class="service-card"><div class="service-icon"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg></div><h3>DoorDash</h3><p>Delivery Available</p></a>
            <a href="https://www.uhaul.com/Locations/Truck-Rentals-near-Fairfield-CA-94533/033221/" target="_blank" class="service-card"><div class="service-icon"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"/></svg></div><h3>U-Haul</h3><p>Truck & Trailer Rentals</p></a>
            <a href="https://location.westernunion.com/global-services/find-locations/us/ca/fairfield/6ef6f82cbd20683a48d838c276b8e255?WUCountry=US&WULanguage=en" target="_blank" class="service-card"><div class="service-icon"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg></div><h3>Western Union</h3><p>Money Transfers</p></a>
            <a href="https://www.riamoneytransfer.com" target="_blank" class="service-card"><div class="service-icon"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"/></svg></div><h3>RIA</h3><p>Money Transfers</p></a>
        </div></section>
        <div class="ebt-banner"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>We Accept EBT / SNAP Benefits</div>
        <nav class="departments" id="departmentsNav"><div class="dept-scroll" id="deptTabs"></div></nav>
        <section class="products-section" id="productsSection">
            <div class="products-header"><p class="products-count">Showing <strong id="productCount">0</strong> products</p>
            <div class="view-toggle"><button class="view-btn active" data-view="grid" title="Grid view"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"/></svg></button><button class="view-btn" data-view="list" title="List view"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg></button></div></div>
            <div class="products-grid" id="productsGrid"><div class="loading-state" style="grid-column:1/-1"><div class="loading-spinner"></div><p>Loading products...</p></div></div>
        </section>
        <section class="lotto-section hidden" id="lottoSection">
            <h2 class="section-title"><svg fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>Lottery</h2>
            <div class="lotto-grid">
                <div class="lotto-card"><h4>Powerball</h4><div class="price">$2 <span>per play</span></div></div>
                <div class="lotto-card"><h4>Mega Millions</h4><div class="price">$2 <span>per play</span></div></div>
                <div class="lotto-card"><h4>SuperLotto Plus</h4><div class="price">$1 <span>per play</span></div></div>
                <div class="lotto-card"><h4>Fantasy 5</h4><div class="price">$1 <span>per play</span></div></div>
                <div class="lotto-card"><h4>Daily 4</h4><div class="price">$1 <span>per play</span></div></div>
                <div class="lotto-card"><h4>Daily 3</h4><div class="price">$1 <span>per play</span></div></div>
                <div class="lotto-card"><h4>Hot Spot</h4><div class="price">$1 <span>per play</span></div></div>
                <div class="lotto-card"><h4>Daily Derby</h4><div class="price">$2 <span>per play</span></div></div>
            </div>
            <h3 class="scratchers-title">Scratchers</h3>
            <div class="scratchers-grid">
                <div class="scratcher-chip">$1 Scratchers</div><div class="scratcher-chip">$2 Scratchers</div><div class="scratcher-chip">$3 Scratchers</div><div class="scratcher-chip">$5 Scratchers</div><div class="scratcher-chip">$10 Scratchers</div><div class="scratcher-chip">$20 Scratchers</div><div class="scratcher-chip">$30 Scratchers</div>
            </div>
        </section>
    </main>
    <footer class="footer"><div class="footer-logo">JK</div><p class="footer-address">730 5th Street, Fairfield, CA 94533</p><p class="footer-hours">Open Daily â€¢ Your Neighborhood Store</p></footer>
    <button class="scroll-top" id="scrollTop" title="Back to top"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18"/></svg></button>

    <!-- <div class="modal-overlay" id="suggestModal"><div class="modal">
        <div class="modal-header"><h2>Suggest a Product</h2><button class="modal-close" id="closeSuggestModal"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg></button></div>
        <div class="modal-body" id="suggestionFormContainer"><form id="suggestionForm">
            <div class="form-group"><label for="productName">Product Name *</label><input type="text" id="productName" name="productName" required placeholder="e.g., Modelo Negra 12-pack"></div>
            <div class="form-group"><label for="productCategory">Category</label><select id="productCategory" name="productCategory"><option value="">Select a category</option><option value="Beer">Beer</option><option value="Wine">Wine</option><option value="Liquor">Liquor</option><option value="Grocery">Grocery</option><option value="Snacks">Snacks</option><option value="Tobacco">Tobacco</option><option value="Other">Other</option></select></div>
            <div class="form-group"><label for="productBrand">Brand (optional)</label><input type="text" id="productBrand" name="productBrand" placeholder="e.g., Modelo"></div>
            <div class="form-group"><label for="productDetails">Additional Details</label><textarea id="productDetails" name="productDetails" placeholder="Tell us more about why you'd like us to carry this item..."></textarea></div>
            <div class="form-group"><label for="customerName">Your Name (optional)</label><input type="text" id="customerName" name="customerName" placeholder="So we can thank you!"></div>
            <div class="form-group"><label for="customerContact">Phone or Email (optional)</label><input type="text" id="customerContact" name="customerContact" placeholder="We'll let you know when it's in stock"><p class="helper-text">We'll only use this to notify you about your suggestion</p></div>
            <button type="submit" class="submit-btn">Submit Suggestion</button>
        </form></div>
    </div></div> -->

    <div class="modal-overlay" id="suggestModal">
        <div class="modal">
          <div class="modal-header">
            <h2>Suggest a Product</h2>
            <button class="modal-close" id="closeSuggestModal">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M6 18L18 6M6 6l12 12"/>
              </svg>
            </button>
          </div>
      
          <div class="modal-body" id="suggestionFormContainer">
            <form id="suggestionForm">
      
              <div class="form-group">
                <label for="productName">Product Name *</label>
                <input
                  type="text"
                  id="productName"
                  name="productName"
                  required
                  placeholder="e.g., Modelo Negra 12-pack"
                >
              </div>
      
              <div class="form-group">
                <label for="productLink">Product Link *</label>
                <input
                  type="url"
                  id="productLink"
                  name="productLink"
                  required
                  placeholder="Paste a link from anywhere for our reference (ex: Amazon, DoorDash, Walmart, etc.)"
                >
                <p class="helper-text">
                  Any website or Instagram post is fine
                </p>
              </div>
      
              <div class="form-group">
                <label for="productDetails">Additional Details</label>
                <textarea
                  id="productDetails"
                  name="productDetails"
                  placeholder="Anything else we should know?"
                ></textarea>
              </div>
      
              <div class="form-group">
                <label for="customerContact">
                  Phone, Email, or Instagram (optional)
                </label>
                <input
                  type="text"
                  id="customerContact"
                  name="customerContact"
                  placeholder="@username, phone, or email"
                >
                <p class="helper-text">
                  Weâ€™ll only use this to notify you if we carry it
                </p>
              </div>
      
              <!-- Honeypot (bots will fill this) -->
              <input
                type="text"
                name="company"
                tabindex="-1"
                autocomplete="off"
                style="display:none"
              >
      
              <button type="submit" class="submit-btn">
                Submit Suggestion
              </button>
      
            </form>
          </div>
        </div>
      </div>
      

    <script>
        const CSV_PATH = './products.csv';
        let products = [], currentDept = 'All', searchQuery = '', imageCache = {};
        const $ = id => document.getElementById(id);
        const deptTabs = $('deptTabs'), productsSection = $('productsSection'), lottoSection = $('lottoSection');
        const productsGrid = $('productsGrid'), productCount = $('productCount'), searchInput = $('searchInput');
        const scrollTopBtn = $('scrollTop'), suggestModal = $('suggestModal'), suggestionForm = $('suggestionForm');
        const suggestionFormContainer = $('suggestionFormContainer');


        // ===============================
        // Display Rules
        // ===============================

        // Product names that should NOT appear on the site
        const HIDDEN_PRODUCT_NAMES = [
            "Item tax"
            // Add names here
            // "Deposit",
            // "CRV Fee",
        ];

        // Normalize department names for display
        function normalizeDepartment(rawDept) {
            if (!rawDept) return 'Other Items';

            const d = rawDept.trim();

            // Any department containing "Drinks"
            if (/drinks/i.test(d)) return 'Drinks';

            // Rename specific departments
            if (/item tax/i.test(d)) return 'Other Items';
            if (/snacks/i.test(d)) return 'Grocery';

            return d;
        }


        async function loadProducts() {
            try {
                const response = await fetch(CSV_PATH);
                if (!response.ok) throw new Error('CSV not found');
                products = parseCSV(await response.text());
                renderDeptTabs(); renderProducts();
            } catch (error) {
                productsGrid.innerHTML = '<div class="empty-state" style="grid-column:1/-1"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg><h3>Unable to load products</h3><p>Please check back later</p></div>';
            }
        }

        function parseCSV(text) {
            const lines = text.split('\n'); if (lines.length < 2) return [];
            const header = parseCSVLine(lines[0]);
            const idx = name => header.findIndex(h => h.toLowerCase() === name.toLowerCase());
            const upcIdx = idx('upc'), nameIdx = idx('name'), deptIdx = idx('department'), sizeIdx = idx('size');
            if (nameIdx === -1) return [];
            const data = [];
            for (let i = 1; i < lines.length; i++) {
                const line = lines[i].trim(); if (!line) continue;
                const values = parseCSVLine(line);
                const rawDept = deptIdx !== -1 ? values[deptIdx] || '' : '';
                const dept = normalizeDepartment(rawDept);

                if (dept.toLowerCase() === 'lotto' || dept.toLowerCase() === 'lottery') continue;
                const product = { upc: upcIdx !== -1 ? values[upcIdx] || '' : '', name: values[nameIdx] || '', department: dept, size: sizeIdx !== -1 ? values[sizeIdx] || '' : '' };
                if (
                    product.name &&
                    !HIDDEN_PRODUCT_NAMES.some(n =>
                        product.name.toLowerCase().includes(n.toLowerCase())
                    )
                ) {
                    data.push(product);
                }
            }
            return data;
        }

        function parseCSVLine(line) {
            const result = []; let current = '', inQuotes = false;
            for (let char of line) { if (char === '"') inQuotes = !inQuotes; else if (char === ',' && !inQuotes) { result.push(current.trim()); current = ''; } else current += char; }
            result.push(current.trim()); return result;
        }

        function getDepartments() { return ['All', ...[...new Set(products.map(p => p.department))].sort(), 'Lotto']; }
        function getDeptCounts() { const counts = { 'All': products.length, 'Lotto': 'ðŸŽ°' }; products.forEach(p => counts[p.department] = (counts[p.department] || 0) + 1); return counts; }

        function renderDeptTabs() {
            const depts = getDepartments(), counts = getDeptCounts();
            deptTabs.innerHTML = depts.map(dept => `<button class="dept-btn ${dept === currentDept ? 'active' : ''}" data-dept="${dept}">${dept}${typeof counts[dept] === 'number' ? `<span class="count">${counts[dept]}</span>` : ''}</button>`).join('');
            deptTabs.querySelectorAll('.dept-btn').forEach(btn => btn.addEventListener('click', () => { currentDept = btn.dataset.dept; renderDeptTabs(); renderProducts(); }));
        }

        function getFilteredProducts() {
            return products.filter(p => {
                const matchDept = currentDept === 'All' || currentDept === 'Lotto' || p.department === currentDept;
                const matchSearch = !searchQuery || p.name.toLowerCase().includes(searchQuery.toLowerCase()) || p.department.toLowerCase().includes(searchQuery.toLowerCase());
                return matchDept && matchSearch;
            });
        }

        async function getProductImage(upc) {
            if (!upc || imageCache[upc] !== undefined) return imageCache[upc] || null;
            try { const res = await fetch(`https://world.openfoodfacts.org/api/v0/product/${upc}.json`); const data = await res.json(); if (data.status === 1 && data.product?.image_url) { imageCache[upc] = data.product.image_url; return data.product.image_url; } } catch (e) {}
            imageCache[upc] = null; return null;
        }

        function createProductCard(product, index) {
            return `<article class="product-card" data-upc="${product.upc}" style="animation-delay:${Math.min(index*0.02,0.2)}s"><div class="product-image"><svg class="placeholder-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"/></svg></div><div class="product-info"><p class="product-dept">${product.department}</p><h3 class="product-name">${product.name}</h3>${product.size ? `<p class="product-size">${product.size}</p>` : ''}</div></article>`;
        }

        function renderProducts() {
            if (currentDept === 'Lotto') { productsSection.classList.add('hidden'); lottoSection.classList.remove('hidden'); productCount.textContent = '0'; return; }
            productsSection.classList.remove('hidden'); lottoSection.classList.add('hidden');
            const filtered = getFilteredProducts(); productCount.textContent = filtered.length;
            if (filtered.length === 0) { productsGrid.innerHTML = '<div class="empty-state" style="grid-column:1/-1"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg><h3>No products found</h3><p>Try a different search or category</p></div>'; return; }
            productsGrid.innerHTML = filtered.map((p, i) => createProductCard(p, i)).join('');
            filtered.slice(0, 20).forEach(async product => {
                if (!product.upc) return; const card = productsGrid.querySelector(`[data-upc="${product.upc}"]`); if (!card) return;
                const imageUrl = await getProductImage(product.upc);
                if (imageUrl) { const container = card.querySelector('.product-image'); const placeholder = container.querySelector('.placeholder-icon'); const img = document.createElement('img'); img.src = imageUrl; img.alt = product.name; img.loading = 'lazy'; img.onload = () => { if (placeholder) placeholder.remove(); container.appendChild(img); }; }
            });
        }

        let searchTimeout;
        searchInput.addEventListener('input', e => { clearTimeout(searchTimeout); searchTimeout = setTimeout(() => { searchQuery = e.target.value; if (currentDept === 'Lotto' && searchQuery) { currentDept = 'All'; renderDeptTabs(); } renderProducts(); }, 200); });
        document.querySelectorAll('.view-btn').forEach(btn => btn.addEventListener('click', () => { document.querySelectorAll('.view-btn').forEach(b => b.classList.remove('active')); btn.classList.add('active'); productsGrid.classList.toggle('list-view', btn.dataset.view === 'list'); }));
        window.addEventListener('scroll', () => scrollTopBtn.classList.toggle('visible', window.scrollY > 400));
        scrollTopBtn.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));
        $('openSuggestModal').addEventListener('click', () => { suggestModal.classList.add('open'); document.body.style.overflow = 'hidden'; });
        $('closeSuggestModal').addEventListener('click', closeModal);
        suggestModal.addEventListener('click', e => { if (e.target === suggestModal) closeModal(); });
        function closeModal() { suggestModal.classList.remove('open'); document.body.style.overflow = ''; }
        suggestionForm.addEventListener('submit', e => {
            e.preventDefault(); const formData = new FormData(suggestionForm);
            const suggestion = { productName: formData.get('productName'), category: formData.get('productCategory'), brand: formData.get('productBrand'), details: formData.get('productDetails'), customerName: formData.get('customerName'), customerContact: formData.get('customerContact'), timestamp: new Date().toISOString() };
            const suggestions = JSON.parse(localStorage.getItem('jollyking_suggestions') || '[]'); suggestions.push(suggestion); localStorage.setItem('jollyking_suggestions', JSON.stringify(suggestions));
            suggestionFormContainer.innerHTML = `<div class="success-message"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg><h3>Thank You!</h3><p>We've received your suggestion for "${suggestion.productName}". We review all suggestions and do our best to stock what our customers want!</p><button class="submit-btn" onclick="location.reload()">Close</button></div>`;
        });
        loadProducts();
    </script>
</body>
</html>